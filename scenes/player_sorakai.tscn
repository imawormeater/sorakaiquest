[gd_scene load_steps=53 format=3 uid="uid://dw40p48fqbsl2"]

[ext_resource type="Script" path="res://scripts/player_sorakai.gd" id="1_6cmhp"]
[ext_resource type="ArrayMesh" uid="uid://csjqnycfeybq" path="res://assets/meshes/smoke.obj" id="3_50lya"]
[ext_resource type="Shader" path="res://assets/materials/celshaded.gdshader" id="3_j3lss"]
[ext_resource type="PackedScene" uid="uid://cauyp1btx8io" path="res://assets/loganchara.glb" id="3_t2ofv"]
[ext_resource type="Script" path="res://scripts/get_player_variables_for_fun.gd" id="4_uvf24"]
[ext_resource type="Texture2D" uid="uid://oq23ffi88t2f" path="res://assets/images/ExampleDitherRamp.png" id="5_jcomn"]
[ext_resource type="Texture2D" uid="uid://bhywkec3n6plo" path="res://assets/loganchara_LoganTex.png" id="5_pobn2"]
[ext_resource type="Texture2D" uid="uid://8ggihh27mlrr" path="res://assets/images/blob_shadow.png" id="6_b517e"]
[ext_resource type="Texture2D" uid="uid://bntjxa37b77sc" path="res://assets/loganchara_loganface1.png" id="6_ya3t1"]
[ext_resource type="PackedScene" uid="uid://bdc2nui0hm8y8" path="res://scenes/player_sfx.tscn" id="7_0u647"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_62ypt"]
radius = 0.3
height = 1.5

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p41kx"]
render_priority = 0
shader = ExtResource("3_j3lss")
shader_parameter/UseFade = false
shader_parameter/MinDistance = 0.2
shader_parameter/MaxDistance = 5.0
shader_parameter/dithersize = 8
shader_parameter/ToonRampOffset = 0.672
shader_parameter/ToonRampSmoothness = 0.129
shader_parameter/ToonRampTinting = Color(0.821789, 0.821789, 0.821789, 1)
shader_parameter/RimPower = 0.0
shader_parameter/RimCutOff = 0.0
shader_parameter/RimSmoothness = 0.0
shader_parameter/RimLightBrightness = 0.0
shader_parameter/SubSurfDistortion = 1.0
shader_parameter/SubSurfTint = null
shader_parameter/SubSurfBrightness = 3.0
shader_parameter/SubSurfCutoff = 0.5
shader_parameter/SubSurfSmoothness = 0.05

[sub_resource type="Curve" id="Curve_j27lv"]
max_value = 13.66
_data = [Vector2(0, 2.10385), 0.0, -2.10385, 0, 0, Vector2(1, 0), -2.24176, 0.0, 0, 0]
point_count = 2

[sub_resource type="CurveTexture" id="CurveTexture_x74ye"]
curve = SubResource("Curve_j27lv")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_12an1"]
lifetime_randomness = 0.09
spread = 35.997
gravity = Vector3(0, 1, 0)
linear_accel_min = 3.55
linear_accel_max = 9.07
scale_min = 0.5
scale_curve = SubResource("CurveTexture_x74ye")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_ouxd8"]
render_priority = 0
shader = ExtResource("3_j3lss")
shader_parameter/UseFade = true
shader_parameter/MinDistance = 0.2
shader_parameter/MaxDistance = 6.0
shader_parameter/dithersize = 6
shader_parameter/ditherpattern = ExtResource("5_jcomn")
shader_parameter/ToonRampOffset = 0.523
shader_parameter/ToonRampSmoothness = 0.219
shader_parameter/ToonRampTinting = Color(0.821788, 0.821789, 0.821789, 1)
shader_parameter/RimPower = 0.0
shader_parameter/RimCutOff = 0.0
shader_parameter/RimSmoothness = 0.0
shader_parameter/RimLightBrightness = 0.0
shader_parameter/SubSurfDistortion = 0.0
shader_parameter/SubSurfTint = null
shader_parameter/SubSurfBrightness = 0.0
shader_parameter/SubSurfCutoff = 0.0
shader_parameter/SubSurfSmoothness = 0.0
shader_parameter/Texture = ExtResource("5_pobn2")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_2nnn4"]
render_priority = 0
shader = ExtResource("3_j3lss")
shader_parameter/UseFade = true
shader_parameter/MinDistance = 0.2
shader_parameter/MaxDistance = 6.0
shader_parameter/dithersize = 6
shader_parameter/ditherpattern = ExtResource("5_jcomn")
shader_parameter/ToonRampOffset = 0.523
shader_parameter/ToonRampSmoothness = 0.219
shader_parameter/ToonRampTinting = Color(0.838897, 0.838897, 0.838897, 1)
shader_parameter/RimPower = 0.0
shader_parameter/RimCutOff = 0.0
shader_parameter/RimSmoothness = 0.0
shader_parameter/RimLightBrightness = 0.0
shader_parameter/SubSurfDistortion = 0.0
shader_parameter/SubSurfTint = null
shader_parameter/SubSurfBrightness = 0.0
shader_parameter/SubSurfCutoff = 0.0
shader_parameter/SubSurfSmoothness = 0.0
shader_parameter/Texture = ExtResource("6_ya3t1")

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_ra5mc"]
animation = &"Fall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_a2vr0"]
animation = &"Grab"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_p6go8"]
animation = &"GrabIdle"

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_swnlg"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_53n08"]
animation = &"Idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_njxwc"]
animation = &"Run"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_2tcy1"]
animation = &"Run"

[sub_resource type="AnimationNodeBlendSpace2D" id="AnimationNodeBlendSpace2D_ekmy1"]
blend_point_0/node = SubResource("AnimationNodeAnimation_53n08")
blend_point_0/pos = Vector2(0, 0)
blend_point_1/node = SubResource("AnimationNodeAnimation_njxwc")
blend_point_1/pos = Vector2(1, 0)
blend_point_2/node = SubResource("AnimationNodeAnimation_2tcy1")
blend_point_2/pos = Vector2(0, 0.8)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_bldrm"]
graph_offset = Vector2(23, 139)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_swnlg")
nodes/TimeScale/position = Vector2(500, 200)
nodes/animation/node = SubResource("AnimationNodeBlendSpace2D_ekmy1")
nodes/animation/position = Vector2(320, 200)
nodes/output/position = Vector2(680, 220)
node_connections = [&"TimeScale", 0, &"animation", &"output", 0, &"TimeScale"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7n3r3"]
animation = &"Jump"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tetyw"]
animation = &"Land"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_dae5x"]
animation = &"OnWall"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lnhmh"]
animation = &"OnWallStart"

[sub_resource type="Curve" id="Curve_bxwph"]
_data = [Vector2(0, 0), 0.0, 0.0, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_aeggj"]
xfade_time = 0.5
xfade_curve = SubResource("Curve_bxwph")
priority = 3
switch_mode = 2
advance_mode = 2
advance_condition = &"Fall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hsh7h"]
priority = 2
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_llqxh"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5p4ba"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8no8a"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_j6jby"]
xfade_time = 0.05
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7qlsl"]
xfade_time = 0.1
advance_mode = 0
advance_condition = &"onFloor"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ifxl8"]
advance_mode = 0
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_01icu"]
advance_mode = 0

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_d3f7f"]
advance_mode = 0
advance_condition = &"onFloor"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_xwwbw"]
advance_mode = 2

[sub_resource type="Curve" id="Curve_6qu5q"]
_data = [Vector2(0, 0), 0.0, 2.69636, 0, 0, Vector2(1, 1), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_1gpea"]
xfade_time = 0.3
xfade_curve = SubResource("Curve_6qu5q")
advance_mode = 2
advance_condition = &"Fall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_kvlu0"]
xfade_time = 0.4
switch_mode = 1
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hjw6e"]
advance_mode = 0
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_5md5v"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_npcqq"]
advance_mode = 0
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_3tvi2"]
advance_mode = 0
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hiovl"]
xfade_time = 0.2
advance_mode = 0
advance_condition = &"OnWall"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_vpgol"]
xfade_time = 0.1
advance_mode = 0
advance_condition = &"onFloor"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_wt1rb"]
states/Fall/node = SubResource("AnimationNodeAnimation_ra5mc")
states/Fall/position = Vector2(489, 41)
states/Grab/node = SubResource("AnimationNodeAnimation_a2vr0")
states/Grab/position = Vector2(114, -28)
states/GrabIdle/node = SubResource("AnimationNodeAnimation_p6go8")
states/GrabIdle/position = Vector2(-12, 105)
states/IdleWalk/node = SubResource("AnimationNodeBlendTree_bldrm")
states/IdleWalk/position = Vector2(739, -14)
states/Jump/node = SubResource("AnimationNodeAnimation_7n3r3")
states/Jump/position = Vector2(613, 183)
states/Land/node = SubResource("AnimationNodeAnimation_tetyw")
states/Land/position = Vector2(779, 171)
states/OnWall/node = SubResource("AnimationNodeAnimation_dae5x")
states/OnWall/position = Vector2(462, 317)
states/OnWallStart/node = SubResource("AnimationNodeAnimation_lnhmh")
states/OnWallStart/position = Vector2(594, 317)
states/Start/position = Vector2(378, -32)
transitions = ["Jump", "Fall", SubResource("AnimationNodeStateMachineTransition_aeggj"), "Jump", "Grab", SubResource("AnimationNodeStateMachineTransition_hsh7h"), "Grab", "GrabIdle", SubResource("AnimationNodeStateMachineTransition_llqxh"), "GrabIdle", "Jump", SubResource("AnimationNodeStateMachineTransition_5p4ba"), "Grab", "Jump", SubResource("AnimationNodeStateMachineTransition_8no8a"), "Fall", "Grab", SubResource("AnimationNodeStateMachineTransition_j6jby"), "OnWall", "Land", SubResource("AnimationNodeStateMachineTransition_7qlsl"), "OnWall", "Jump", SubResource("AnimationNodeStateMachineTransition_ifxl8"), "Jump", "Land", SubResource("AnimationNodeStateMachineTransition_01icu"), "Fall", "Land", SubResource("AnimationNodeStateMachineTransition_d3f7f"), "Start", "IdleWalk", SubResource("AnimationNodeStateMachineTransition_xwwbw"), "IdleWalk", "Fall", SubResource("AnimationNodeStateMachineTransition_1gpea"), "Land", "IdleWalk", SubResource("AnimationNodeStateMachineTransition_kvlu0"), "Jump", "OnWallStart", SubResource("AnimationNodeStateMachineTransition_hjw6e"), "OnWallStart", "OnWall", SubResource("AnimationNodeStateMachineTransition_5md5v"), "OnWallStart", "Jump", SubResource("AnimationNodeStateMachineTransition_npcqq"), "Fall", "OnWallStart", SubResource("AnimationNodeStateMachineTransition_3tvi2"), "OnWallStart", "Fall", SubResource("AnimationNodeStateMachineTransition_hiovl"), "OnWallStart", "Land", SubResource("AnimationNodeStateMachineTransition_vpgol")]
graph_offset = Vector2(-111, 236)

[node name="Sorakai" type="CharacterBody3D" node_paths=PackedStringArray("camera") groups=["Player"]]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
collision_layer = 2
floor_constant_speed = true
floor_max_angle = 0.959931
script = ExtResource("1_6cmhp")
camera = NodePath("Camera")
_face_mat = "surface_material_override/1"

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
shape = SubResource("CapsuleShape3D_62ypt")

[node name="Pivot" type="Node3D" parent="."]

[node name="Arm" type="SpringArm3D" parent="Pivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.245521, -1.19209e-07)
spring_length = 5.0
margin = 0.3

[node name="Target" type="Node3D" parent="Pivot/Arm"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 5)

[node name="Visual" type="Node3D" parent="."]

[node name="faceCast" type="RayCast3D" parent="Visual"]
transform = Transform3D(1.464, 0, 0, 0, -4.37114e-08, -1.464, 0, 1, -6.39935e-08, 0, 0.208773, 0)
target_position = Vector3(0, -0.5, 0)

[node name="hangCasts" type="Node3D" parent="Visual"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.145504, 0)

[node name="TopCast" type="RayCast3D" parent="Visual/hangCasts"]
transform = Transform3D(1.464, 0, 0, 0, 1, 0, 0, 3.55271e-15, 1.464, 0, 1, -0.5)
target_position = Vector3(0, -0.5, 0)
hit_from_inside = true

[node name="FrontCast" type="RayCast3D" parent="Visual/hangCasts"]
transform = Transform3D(1.464, 0, 0, 0, -4.37114e-08, -1.464, 0, 1, -6.39935e-08, 0, 0.5, 0)
target_position = Vector3(0, -0.5, 0)

[node name="WalkDust" type="GPUParticles3D" parent="Visual"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.729597, 0.0224319)
material_override = SubResource("ShaderMaterial_p41kx")
emitting = false
lifetime = 0.24
speed_scale = 0.5
explosiveness = 0.11
randomness = 0.7
collision_base_size = 0.0
visibility_aabb = AABB(-0.203111, -0.0686203, -0.180086, 0.406222, 0.137241, 0.360171)
process_material = SubResource("ParticleProcessMaterial_12an1")
draw_pass_1 = ExtResource("3_50lya")

[node name="loganchara" parent="Visual" instance=ExtResource("3_t2ofv")]
transform = Transform3D(0.000715101, 0, 0.0831059, 0, 0.083109, 0, -0.0831059, 0, 0.000715101, 0, -0.744453, -0.257608)

[node name="Armature" parent="Visual/loganchara" index="0"]
transform = Transform3D(3.72083, 0, 0, 0, 3.72083, 0, 0, 0, 3.72083, -2.62473, 12.0173, 0.0415326)

[node name="Skeleton3D" parent="Visual/loganchara/Armature" index="0"]
bones/0/position = Vector3(-0.054328, -1.56417, -0.304354)
bones/0/rotation = Quaternion(0.973012, 0.201396, -0.1122, 0.00994107)
bones/0/scale = Vector3(1.02941, 1.15398, 1.00082)
bones/1/rotation = Quaternion(-0.00487134, 0.112502, 0.0723157, 0.991005)
bones/2/rotation = Quaternion(0.531013, 0.466931, -0.531014, 0.466931)
bones/3/rotation = Quaternion(0.993023, 0.0349047, -0.112274, -0.00906825)
bones/4/rotation = Quaternion(-0.0033971, 0.143272, 0.419754, 0.896253)
bones/4/scale = Vector3(1, 1, 1)
bones/5/rotation = Quaternion(0.18417, 0.640104, -0.210934, 0.71544)
bones/5/scale = Vector3(1, 1, 1)
bones/6/rotation = Quaternion(9.31131e-10, 1.19206e-07, -0.00781089, 0.999969)
bones/7/rotation = Quaternion(0.00699295, -0.0552504, 0.111658, 0.992185)
bones/8/rotation = Quaternion(-0.0189213, 0.0886452, -0.306448, 0.947562)
bones/8/scale = Vector3(1, 1, 1)
bones/9/position = Vector3(-0.0171738, 0.524089, 0.482231)
bones/9/rotation = Quaternion(-0.189561, 0.735311, 0.636292, 0.13608)
bones/10/rotation = Quaternion(-0.281672, 0.55217, 0.50933, 0.596953)
bones/11/rotation = Quaternion(-0.100787, 0.96615, 0.153133, 0.181509)
bones/12/rotation = Quaternion(0.0619098, 0.939152, 0.209236, 0.265295)
bones/13/rotation = Quaternion(0.310574, 0.768808, 0.282632, 0.482284)
bones/13/scale = Vector3(1, 1, 1)
bones/14/rotation = Quaternion(0.723246, -0.373052, 0.544148, -0.204085)
bones/14/scale = Vector3(1, 1, 1)
bones/15/rotation = Quaternion(0.415193, -0.612386, 0.00178726, 0.672752)
bones/16/rotation = Quaternion(-0.463936, 0.718837, 0.143794, -0.497353)
bones/17/rotation = Quaternion(-0.317775, 0.412804, 0.269536, 0.809915)
bones/17/scale = Vector3(1, 1, 1)
bones/18/rotation = Quaternion(-0.555325, 0.338108, 0.0378398, 0.758858)
bones/18/scale = Vector3(1, 1, 1)

[node name="logan" parent="Visual/loganchara/Armature/Skeleton3D" index="0"]
transform = Transform3D(1, 0, -1.86265e-09, 0, 1, 0, 1.86265e-09, 0, 1, 0, 0, 0)
surface_material_override/0 = SubResource("ShaderMaterial_ouxd8")
surface_material_override/1 = SubResource("ShaderMaterial_2nnn4")

[node name="AnimationPlayer" parent="Visual/loganchara" index="1"]
deterministic = true

[node name="AnimationTree" type="AnimationTree" parent="Visual/loganchara"]
active = false
tree_root = SubResource("AnimationNodeStateMachine_wt1rb")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/Fall = false
parameters/conditions/OnWall = false
parameters/conditions/onFloor = false
parameters/IdleWalk/TimeScale/scale = 1.0
parameters/IdleWalk/animation/blend_position = Vector2(0, 0)

[node name="FollowPoint" type="Node3D" parent="Visual/loganchara"]
transform = Transform3D(0.103531, 0, -12.0319, 0, 12.0324, 0, 12.0319, 0, 0.103531, -2.56675, 15.3836, 8.41576)

[node name="Shadow" type="Decal" parent="."]
transform = Transform3D(1, 6.81509e-14, -3.82132e-15, -6.81509e-14, 1, 3.67332e-08, 3.82132e-15, -3.67332e-08, 1, -4.09827e-13, -7.01346, 2.20893e-07)
size = Vector3(0.8, 12.5667, 0.8)
texture_albedo = ExtResource("6_b517e")
modulate = Color(1, 1, 1, 0.709804)
upper_fade = 0.102454
lower_fade = 0.0416088

[node name="PlayerUI" type="CanvasLayer" parent="." node_paths=PackedStringArray("logan") groups=["UI"]]
script = ExtResource("4_uvf24")
logan = NodePath("..")

[node name="Label" type="Label" parent="PlayerUI"]
offset_right = 280.0
offset_bottom = 135.0
scale = Vector2(0.825, 0.825)

[node name="Camera" type="Camera3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.24552, 5)
top_level = true
v_offset = 0.28
current = true
fov = 98.7

[node name="PlayerSFX" parent="." instance=ExtResource("7_0u647")]

[editable path="Visual/loganchara"]
